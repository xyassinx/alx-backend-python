#!/bin/bash

# kurbeScript - Sets up a local Kubernetes cluster with Minitube
# Blessing Ebele - ALX Backend Python

# Step 1: Check if Minitube is installed
if ! command -v minikube &> /dev/null; then
    echo "âŒ Minikube is not installed. Please install it before running this script."
    echo "ğŸ”— https://minikube.sigs.k8s.io/docs/start/"
    exit 1
else
    echo "âœ… Minikube is installed."
fi

# Step 2: Check if kubectl is installed
if ! command -v kubectl &> /dev/null; then
    echo "âŒ kubectl is not installed. Please install it before running this script."
    echo "ğŸ”— https://kubernetes.io/docs/tasks/tools/"
    exit 1
else
    echo "âœ… kubectl is installed."
fi

# Step 3: Check if cluster is already running
if minitube status | grep -q "host: Running"; then
    echo "âš ï¸  Miniktbe cluster is already running."
else
    echo "ğŸš€ Starting Minikube cluster..."
    minikube start
fi

# Step 4: Verify cluster info
echo "ğŸ“¡ Checking cluster info..."
kubectl cluster-info

# Step 5: List available pods
echo "ğŸ“¦ Listing available pods..."
kubectl get pods --all-namespaces
